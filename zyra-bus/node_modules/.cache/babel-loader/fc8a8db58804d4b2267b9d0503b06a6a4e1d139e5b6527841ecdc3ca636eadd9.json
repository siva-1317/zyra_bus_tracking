{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sathy\\\\OneDrive\\\\Desktop\\\\bus-app\\\\zyra-bus\\\\src\\\\components\\\\Tracking.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\nimport \"leaflet-routing-machine\";\nimport L from \"leaflet\";\nimport { useEffect, useRef, useState } from \"react\";\nimport students from \"../data/students.json\";\nimport busData from \"../data/bus.json\";\nimport markerIcon from \"leaflet/dist/images/marker-icon.png\";\nimport markerShadow from \"leaflet/dist/images/marker-shadow.png\";\n\n// ---------------- FIX DEFAULT MARKERS ----------------\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconUrl: markerIcon,\n  shadowUrl: markerShadow\n});\n\n// ---------------- LOCAL CACHE (primary) ----------------\nconst cityCache = {\n  \"BIT College\": [11.4986, 77.2743],\n  Coimbatore: [11.0168, 76.9558],\n  Sulur: [11.0266, 77.1257],\n  Avinashi: [11.1929, 77.268],\n  Gopichettipalayam: [11.4549, 77.4423],\n  Nambiyur: [11.359, 77.321]\n};\n\n// ---------------- SAFE GEOCODER ----------------\nasync function geocode(place) {\n  // First use local cache\n  if (cityCache[place]) return cityCache[place];\n\n  // Fallback to API (if allowed)\n  try {\n    const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(place)}`);\n    const data = await res.json();\n    if (data.length) {\n      const coords = [parseFloat(data[0].lat), parseFloat(data[0].lon)];\n      cityCache[place] = coords; // cache it\n      return coords;\n    }\n  } catch (e) {\n    console.warn(\"Geocode blocked:\", place);\n  }\n  return null;\n}\n\n// ---------------- ROUTING COMPONENT ----------------\nfunction Routing({\n  points,\n  setInfo,\n  setRouteCoords\n}) {\n  _s();\n  const map = useMap();\n  const ref = useRef(null);\n  useEffect(() => {\n    if (!map || !points.length || ref.current) return;\n    ref.current = L.Routing.control({\n      waypoints: points.map(p => L.latLng(p[0], p[1])),\n      addWaypoints: false,\n      draggableWaypoints: false,\n      fitSelectedRoutes: true,\n      show: false,\n      lineOptions: {\n        styles: [{\n          color: \"red\",\n          weight: 5\n        }]\n      }\n    }).on(\"routesfound\", e => {\n      const r = e.routes[0];\n      setInfo({\n        distance: (r.summary.totalDistance / 1000).toFixed(2),\n        time: Math.round(r.summary.totalTime / 60)\n      });\n      setRouteCoords(r.coordinates);\n    }).addTo(map);\n  }, [map, points, setInfo, setRouteCoords]);\n  return null;\n}\n\n// ---------------- MAIN ----------------\n_s(Routing, \"0gNWjwPGqDjL6mAH3cOgGbWcGTA=\", false, function () {\n  return [useMap];\n});\n_c = Routing;\nexport default function Tracking() {\n  _s2();\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const role = user.role.toLowerCase();\n  const [points, setPoints] = useState([]);\n  const [routeCoords, setRouteCoords] = useState([]);\n  const [busPos, setBusPos] = useState(null);\n  const [info, setInfo] = useState({\n    distance: 0,\n    time: 0\n  });\n  const [nextStop, setNextStop] = useState(\"\");\n  const [progress, setProgress] = useState(0);\n\n  // -------- LOAD ROUTE BASED ON ROLE --------\n  useEffect(() => {\n    async function load() {\n      // STUDENT → student.json\n      if (role === \"student\") {\n        const student = students.students.find(s => s.id === user.id);\n        const bus = busData.busses.find(b => b.busNo === student.busNo);\n        const studentLoc = await geocode(student.location);\n        const college = await geocode(bus.route[0]);\n        if (studentLoc && college) {\n          setPoints([studentLoc, college]);\n        }\n      }\n\n      // DRIVER → bus.json\n      if (role === \"driver\") {\n        const bus = busData.busses.find(b => b.busNo === user.busNo);\n        const geo = [];\n        for (let city of bus.route) {\n          const p = await geocode(city);\n          if (p) geo.push(p);\n        }\n        setPoints(geo);\n        setNextStop(bus.route[1]);\n      }\n    }\n    load();\n  }, [user, role]);\n\n  // -------- DRIVER GPS (publish) --------\n  useEffect(() => {\n    if (role !== \"driver\") return;\n    const watch = navigator.geolocation.watchPosition(pos => {\n      const p = [pos.coords.latitude, pos.coords.longitude];\n      localStorage.setItem(\"liveBus\", JSON.stringify(p));\n      setBusPos(p);\n    });\n    return () => navigator.geolocation.clearWatch(watch);\n  }, [role]);\n\n  // -------- STUDENT READ BUS --------\n  useEffect(() => {\n    if (role !== \"student\") return;\n    const i = setInterval(() => {\n      const live = JSON.parse(localStorage.getItem(\"liveBus\"));\n      if (live) setBusPos(live);\n    }, 3000);\n    return () => clearInterval(i);\n  }, [role]);\n\n  // -------- PROGRESS BAR --------\n  useEffect(() => {\n    if (!busPos || !routeCoords.length) return;\n    const idx = routeCoords.findIndex(p => Math.abs(p.lat - busPos[0]) < 0.0005 && Math.abs(p.lng - busPos[1]) < 0.0005);\n    if (idx !== -1) {\n      setProgress(Math.round(idx / routeCoords.length * 100));\n    }\n  }, [busPos, routeCoords]);\n  if (!points.length) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading route...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 30\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card shadow p-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      children: [\"Tracking (\", role, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Distance: \", info.distance, \" km | ETA: \", info.time, \" mins\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), role === \"driver\" && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Next Stop:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 32\n      }, this), \" \", nextStop]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 29\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"progress mb-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-bar bg-success\",\n        style: {\n          width: `${progress}%`\n        },\n        children: [progress, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: points[0],\n      zoom: 10,\n      style: {\n        height: \"400px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Routing, {\n        points: points,\n        setInfo: setInfo,\n        setRouteCoords: setRouteCoords\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), points.map((p, i) => /*#__PURE__*/_jsxDEV(Marker, {\n        position: p,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: i === 0 ? \"Start\" : i === points.length - 1 ? \"Destination\" : `Stop ${i}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this)), busPos && /*#__PURE__*/_jsxDEV(Marker, {\n        position: busPos,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"Live Bus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this);\n}\n_s2(Tracking, \"8OLtL9h8HEZKmDcjotExLqdpGWk=\");\n_c2 = Tracking;\nvar _c, _c2;\n$RefreshReg$(_c, \"Routing\");\n$RefreshReg$(_c2, \"Tracking\");","map":{"version":3,"names":["MapContainer","TileLayer","Marker","Popup","useMap","L","useEffect","useRef","useState","students","busData","markerIcon","markerShadow","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconUrl","shadowUrl","cityCache","Coimbatore","Sulur","Avinashi","Gopichettipalayam","Nambiyur","geocode","place","res","fetch","encodeURIComponent","data","json","length","coords","parseFloat","lat","lon","e","console","warn","Routing","points","setInfo","setRouteCoords","_s","map","ref","current","control","waypoints","p","latLng","addWaypoints","draggableWaypoints","fitSelectedRoutes","show","lineOptions","styles","color","weight","on","r","routes","distance","summary","totalDistance","toFixed","time","Math","round","totalTime","coordinates","addTo","_c","Tracking","_s2","user","JSON","parse","localStorage","getItem","role","toLowerCase","setPoints","routeCoords","busPos","setBusPos","info","nextStop","setNextStop","progress","setProgress","load","student","find","s","id","bus","busses","b","busNo","studentLoc","location","college","route","geo","city","push","watch","navigator","geolocation","watchPosition","pos","latitude","longitude","setItem","stringify","clearWatch","i","setInterval","live","clearInterval","idx","findIndex","abs","lng","children","fileName","_jsxFileName","lineNumber","columnNumber","className","style","width","center","zoom","height","url","position","_c2","$RefreshReg$"],"sources":["C:/Users/sathy/OneDrive/Desktop/bus-app/zyra-bus/src/components/Tracking.js"],"sourcesContent":["import { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\r\nimport \"leaflet-routing-machine\";\r\nimport L from \"leaflet\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nimport students from \"../data/students.json\";\r\nimport busData from \"../data/bus.json\";\r\n\r\nimport markerIcon from \"leaflet/dist/images/marker-icon.png\";\r\nimport markerShadow from \"leaflet/dist/images/marker-shadow.png\";\r\n\r\n// ---------------- FIX DEFAULT MARKERS ----------------\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconUrl: markerIcon,\r\n  shadowUrl: markerShadow,\r\n});\r\n\r\n// ---------------- LOCAL CACHE (primary) ----------------\r\nconst cityCache = {\r\n  \"BIT College\": [11.4986, 77.2743],\r\n  Coimbatore: [11.0168, 76.9558],\r\n  Sulur: [11.0266, 77.1257],\r\n  Avinashi: [11.1929, 77.268],\r\n  Gopichettipalayam: [11.4549, 77.4423],\r\n  Nambiyur: [11.359, 77.321],\r\n};\r\n\r\n// ---------------- SAFE GEOCODER ----------------\r\nasync function geocode(place) {\r\n  // First use local cache\r\n  if (cityCache[place]) return cityCache[place];\r\n\r\n  // Fallback to API (if allowed)\r\n  try {\r\n    const res = await fetch(\r\n      `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n        place\r\n      )}`\r\n    );\r\n    const data = await res.json();\r\n\r\n    if (data.length) {\r\n      const coords = [parseFloat(data[0].lat), parseFloat(data[0].lon)];\r\n      cityCache[place] = coords; // cache it\r\n      return coords;\r\n    }\r\n  } catch (e) {\r\n    console.warn(\"Geocode blocked:\", place);\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n// ---------------- ROUTING COMPONENT ----------------\r\nfunction Routing({ points, setInfo, setRouteCoords }) {\r\n  const map = useMap();\r\n  const ref = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!map || !points.length || ref.current) return;\r\n\r\n    ref.current = L.Routing.control({\r\n      waypoints: points.map(p => L.latLng(p[0], p[1])),\r\n      addWaypoints: false,\r\n      draggableWaypoints: false,\r\n      fitSelectedRoutes: true,\r\n      show: false,\r\n      lineOptions: {\r\n        styles: [{ color: \"red\", weight: 5 }],\r\n      },\r\n    })\r\n      .on(\"routesfound\", e => {\r\n        const r = e.routes[0];\r\n\r\n        setInfo({\r\n          distance: (r.summary.totalDistance / 1000).toFixed(2),\r\n          time: Math.round(r.summary.totalTime / 60),\r\n        });\r\n\r\n        setRouteCoords(r.coordinates);\r\n      })\r\n      .addTo(map);\r\n  }, [map, points, setInfo, setRouteCoords]);\r\n\r\n  return null;\r\n}\r\n\r\n// ---------------- MAIN ----------------\r\nexport default function Tracking() {\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const role = user.role.toLowerCase();\r\n\r\n  const [points, setPoints] = useState([]);\r\n  const [routeCoords, setRouteCoords] = useState([]);\r\n  const [busPos, setBusPos] = useState(null);\r\n  const [info, setInfo] = useState({ distance: 0, time: 0 });\r\n  const [nextStop, setNextStop] = useState(\"\");\r\n  const [progress, setProgress] = useState(0);\r\n\r\n  // -------- LOAD ROUTE BASED ON ROLE --------\r\n  useEffect(() => {\r\n    async function load() {\r\n      // STUDENT → student.json\r\n      if (role === \"student\") {\r\n        const student = students.students.find(s => s.id === user.id);\r\n        const bus = busData.busses.find(b => b.busNo === student.busNo);\r\n\r\n        const studentLoc = await geocode(student.location);\r\n        const college = await geocode(bus.route[0]);\r\n\r\n        if (studentLoc && college) {\r\n          setPoints([studentLoc, college]);\r\n        }\r\n      }\r\n\r\n      // DRIVER → bus.json\r\n      if (role === \"driver\") {\r\n        const bus = busData.busses.find(b => b.busNo === user.busNo);\r\n\r\n        const geo = [];\r\n        for (let city of bus.route) {\r\n          const p = await geocode(city);\r\n          if (p) geo.push(p);\r\n        }\r\n\r\n        setPoints(geo);\r\n        setNextStop(bus.route[1]);\r\n      }\r\n    }\r\n\r\n    load();\r\n  }, [user, role]);\r\n\r\n  // -------- DRIVER GPS (publish) --------\r\n  useEffect(() => {\r\n    if (role !== \"driver\") return;\r\n\r\n    const watch = navigator.geolocation.watchPosition(pos => {\r\n      const p = [pos.coords.latitude, pos.coords.longitude];\r\n      localStorage.setItem(\"liveBus\", JSON.stringify(p));\r\n      setBusPos(p);\r\n    });\r\n\r\n    return () => navigator.geolocation.clearWatch(watch);\r\n  }, [role]);\r\n\r\n  // -------- STUDENT READ BUS --------\r\n  useEffect(() => {\r\n    if (role !== \"student\") return;\r\n\r\n    const i = setInterval(() => {\r\n      const live = JSON.parse(localStorage.getItem(\"liveBus\"));\r\n      if (live) setBusPos(live);\r\n    }, 3000);\r\n\r\n    return () => clearInterval(i);\r\n  }, [role]);\r\n\r\n  // -------- PROGRESS BAR --------\r\n  useEffect(() => {\r\n    if (!busPos || !routeCoords.length) return;\r\n\r\n    const idx = routeCoords.findIndex(\r\n      p =>\r\n        Math.abs(p.lat - busPos[0]) < 0.0005 &&\r\n        Math.abs(p.lng - busPos[1]) < 0.0005\r\n    );\r\n\r\n    if (idx !== -1) {\r\n      setProgress(Math.round((idx / routeCoords.length) * 100));\r\n    }\r\n  }, [busPos, routeCoords]);\r\n\r\n  if (!points.length) return <p>Loading route...</p>;\r\n\r\n  return (\r\n    <div className=\"card shadow p-3\">\r\n\r\n      <h5>Tracking ({role})</h5>\r\n\r\n      <p>\r\n        Distance: {info.distance} km | ETA: {info.time} mins\r\n      </p>\r\n\r\n      {role === \"driver\" && <p><b>Next Stop:</b> {nextStop}</p>}\r\n\r\n      <div className=\"progress mb-2\">\r\n        <div className=\"progress-bar bg-success\" style={{ width: `${progress}%` }}>\r\n          {progress}%\r\n        </div>\r\n      </div>\r\n\r\n      <MapContainer center={points[0]} zoom={10} style={{ height: \"400px\" }}>\r\n\r\n        <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n\r\n        <Routing\r\n          points={points}\r\n          setInfo={setInfo}\r\n          setRouteCoords={setRouteCoords}\r\n        />\r\n\r\n        {/* Start + Stops */}\r\n        {points.map((p, i) => (\r\n          <Marker key={i} position={p}>\r\n            <Popup>\r\n              {i === 0\r\n                ? \"Start\"\r\n                : i === points.length - 1\r\n                ? \"Destination\"\r\n                : `Stop ${i}`}\r\n            </Popup>\r\n          </Marker>\r\n        ))}\r\n\r\n        {/* Live Bus */}\r\n        {busPos && (\r\n          <Marker position={busPos}>\r\n            <Popup>Live Bus</Popup>\r\n          </Marker>\r\n        )}\r\n\r\n      </MapContainer>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}